(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{299:function(t,e,a){"use strict";a.r(e);var n=a(0),s=Object(n.a)({},(function(){var t=this.$createElement;this._self._c;return this._m(0)}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content"},[a("h3",{attrs:{id:"é¡¹ç›®è‡ªåŠ¨åŒ–éƒ¨ç½²"}},[t._v("é¡¹ç›®è‡ªåŠ¨åŒ–éƒ¨ç½²")]),a("h2",{attrs:{id:"ssh-copy-id"}},[t._v("ssh-copy-id")]),a("p",[t._v("ä½¿ç”¨sshå»ç™»é™†åˆ°è¿œç¨‹æœåŠ¡å™¨çš„è„šæœ¬")]),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("ssh-copy-id -i .ssh/id_rsa.pub  root@47.94.86.110\nssh root@47.94.86.110\n")])])]),a("h2",{attrs:{id:"nginx-å®‰è£…"}},[t._v("nginx å®‰è£…")]),a("p",[t._v("å®‰è£…æœåŠ¡å™¨éœ€è¦ç”¨åˆ°çš„æ¨¡å—")]),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("yum install -y gcc gcc-c++ pcre pcre-devel zlib zlib-devel openssl openssl-devel\n")])])]),a("p",[t._v("æå‰åˆ›å»ºå¥½è½¯ä»¶éœ€è¦ä½¿ç”¨åˆ°çš„ç›®å½•")]),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("mkdir -p /usr/local/nginx\nmkdir -p /var/log/nginx\nmkdir -p /var/temp/nginx\n")])])]),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("--prefix=/usr/local/nginx æŒ‡å®šæœåŠ¡å®‰è£…åˆ°ä»€ä¹ˆç›®å½•\n--error-log-path=/var/log/nginx/error.log  æŒ‡å®šé”™è¯¯æ—¥å¿—å­˜æ”¾åœ°å€ \n/var/temp/nginx å­˜æ”¾ä»£ç†è¿‡ç¨‹ä¸­äº§ç”Ÿçš„ä¸´æ—¶æ–‡ä»¶\n")])])]),a("p",[t._v("1.ä¸‹è½½ openssl (åˆ°å®˜ç½‘æŸ¥çœ‹æœ€æ–°çš„ç‰ˆæœ¬ï¼Œå¯ä»¥ä¸‹è½½æœ€æ–°çš„)\nwget -c http://www.openssl.org/source/openssl-1.0.1c.tar.gz\nå°† openssl è§£å‹ï¼ˆè®°ä½è§£å‹åçš„ç›®å½•ï¼‰\n2.åˆ° nginx å®˜ç½‘ä¸‹è½½æœ€æ–°çš„ nginx æºç ï¼Œ è§£å‹ è¿›å…¥è§£å‹åçš„ç›®å½•æ‰§è¡Œä¸‹é¢çš„ä»£ç ï¼Œè¯¥å‘½ä»¤æ˜¯é…ç½®å¦‚ä½•ç¼–è¯‘ nginx")]),a("p",[t._v("wget -c http://nginx.org/download/nginx-1.14.2.tar.gz")]),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("tar -tzvf xxx.tar.gz\n")])])]),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("./configure --prefix=/usr/local/nginx \\   \n--pid-path=/var/local/nginx/nginx.pid \\\n--lock-path=/var/lock/nginx/nginx.lock \\\n--error-log-path=/var/log/nginx/error.log \\\n--http-log-path=/var/log/nginx/access.log \\\n--with-openssl=/root/nginx/openssl-1.0.1c \\  # è¿™é‡Œä½¿ç”¨ openssl è§£å‹åçš„ç›®å½•ï¼Œéœ€è¦ä¿®æ”¹ï¼ï¼ï¼\n--with-http_gzip_static_module \\\n--with-http_ssl_module \\\n--with-threads \\\n--with-debug \\\n--with-http_v2_module \\\n--with-stream \\\n--http-client-body-temp-path=/var/temp/nginx/client \\\n--http-proxy-temp-path=/var/temp/nginx/proxy \\\n--http-fastcgi-temp-path=/var/temp/nginx/fastcgi \\\n--http-uwsgi-temp-path=/var/temp/nginx/uwsgi \\\n--http-scgi-temp-path=/var/temp/nginx/scgi\nç¼–è¯‘\nmake\nå°†ç¼–è¯‘åçš„ç»“æœè¿›è¡Œå®‰è£…\nmake install\n")])])]),a("h4",{attrs:{id:"nginx-bash"}},[t._v("nginx - bash")]),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('#!/bin/bash\necho "----------nginx config start----------"\nmkdir -p /usr/local/nginx\nmkdir -p /var/log/nginx\nmkdir -p /var/temp/nginx\ncd ./nginx-1.14.2\n./configure --prefix=/usr/local/nginx --pid-path=/var/local/nginx/nginx.pid --lock-path=/var/lock/nginx/nginx.lock --error-log-path=/var/log/nginx/error.log --http-log-path=/var/log/nginx/access.log --with-openssl=/openssl-1.1.0g --with-http_gzip_static_module --with-http_ssl_module --with-threads --with-debug --with-http_v2_module --with-stream --http-client-body-temp-path=/var/temp/nginx/client --http-proxy-temp-path=/var/temp/nginx/proxy --http-fastcgi-temp-path=/var/temp/nginx/fastcgi --http-uwsgi-temp-path=/var/temp/nginx/uwsgi --http-scgi-temp-path=/var/temp/nginx/scgi\nmake\nmake install\necho "----------nginx config end----------"\n')])])]),a("h4",{attrs:{id:"nginx-æœªæ‰¾åˆ°å‘½ä»¤"}},[t._v("Nginx-æœªæ‰¾åˆ°å‘½ä»¤")]),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("vim /etc/profile\n\nåœ¨profileæ–‡ä»¶æœ«å°¾ï¼ŒåŠ ä¸Šä¸€è¡Œ\næŒ‡å‘ä½ çš„nginxçš„å®‰è£…ä½ç½®çš„sbin ç›®å½•\nPATH=$PATH:/usr/local/nginx/sbin\n\né‡æ–°åŠ è½½ç¯å¢ƒ\nsource /etc/profile   ===>>> \n\nnginx -v : nginx version: nginx/1.14.2\n")])])]),a("h2",{attrs:{id:"nvmå®‰è£…"}},[t._v("nvmå®‰è£…")]),a("p",[t._v("å…ˆå¸è½½,åœ¨å®‰è£…")]),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.33.2/install.sh | bash\n")])])]),a("p",[t._v("é€šè¿‡cd ~/.nvmæŸ¥çœ‹é‡Œé¢çš„æ‰€æœ‰æ–‡ä»¶ï¼Œå¦‚æœæœ‰nvm.shå°±æˆåŠŸäº†")]),a("p",[t._v("æœ¬åœ°è¿è¡Œnvmè¿˜æ˜¯å‡ºç°command not foundï¼Œé‚£ä¹ˆè¯·æ£€æŸ¥æ˜¯å¦å«æœ‰.bash_profileæ–‡ä»¶")]),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("ls -a | grep .bash_profile\n")])])]),a("p",[t._v("æ²¡æœ‰bash_profileåˆ™æ–°å»ºæ–‡ä»¶ï¼Œæ­£å¸¸.bash_profileå†…å®¹")]),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('export NVM_DIR="$HOME/.nvm"\n[ -s "$NVM_DIR/nvm.sh" ] && \\. "$NVM_DIR/nvm.sh"  # This loads nvm\n[ -s "$NVM_DIR/bash_completion" ] && \\. "$NVM_DIR/bash_completion"  # This loads nvm bash_completion\n\nsource ~/.bashrc\n')])])]),a("p",[a("strong",[t._v("åˆ‡æ¢nodeé»˜è®¤ç‰ˆæœ¬")])]),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("nvm ls-remote\nnvm install stable(æœ€æ–°ç¨³å®šæ£’)\nnvm alias default ç‰ˆæœ¬å·\n")])])]),a("h2",{attrs:{id:"pm2"}},[t._v("PM2")]),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("npm install pm2 -g\n")])])]),a("h2",{attrs:{id:"ç§æœ‰åŒ–gitlabéƒ¨ç½²"}},[t._v("ç§æœ‰åŒ–gitlabéƒ¨ç½²")]),a("p",[t._v("http://www.git-scm.com.cn/1466.html")]),a("p",[t._v("https://www.cnblogs.com/sunmmi/articles/5847785.html\nhttps://blog.51cto.com/caiyuanji/2114796?cid=707746")]),a("h4",{attrs:{id:"gitlabæœåŠ¡"}},[t._v("gitlabæœåŠ¡")]),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("yum install -y curl openssh-server openssh-clients postfix cronie policycoreutils-python\n//10.xä»¥åå¼€å§‹ä¾èµ–policycoreutils-python\nsystemctl start postfix\nsystemctl enable postfix\n")])])]),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("wget -c https://mirrors.tuna.tsinghua.edu.cn/gitlab-ce/yum/el7/gitlab-ce-12.1.12-ce.0.el7.x86_64.rpm\nrpm -ivh gitlab-ce-12.1.12-ce.0.el7.x86_64.rpm     \ngitlab-ctl reconfigure\ngitlab-ctl stop\ngitlab-ctl start\ngitlab-ctl restart\n")])])]),a("h4",{attrs:{id:"æ³¨æ„äº‹é¡¹"}},[t._v("æ³¨æ„äº‹é¡¹")]),a("p",[a("strong",[t._v("é…ç½®ä¿®æ”¹éœ€è¦é‡æ–°ç”Ÿæˆé…ç½®æ–‡ä»¶ï¼Œå¹¶ä¸”é‡å¯")])]),a("ul",[a("li",[t._v("gitlabè‡ªå¸¦çš„nginx å’Œ æœåŠ¡å™¨å·²æœ‰çš„nginxå†²çª")])]),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("vim /etc/gitlab/gitlab.rb\nnginx['listen_port'] = 8899 (line 1046)\nexternal_url 'åŸŸå:8899'\nunicorn['port'] = 8877(å¯ä»¥ä¸ä¿®æ”¹  line 695)  \n\nvim /var/opt/gitlab/gitlab-rails/etc/unicorn.rb(å¯ä»¥ä¸ä¿®æ”¹)\nlisten \"127.0.0.1:8877\", :tcp_nopush => true\n\nvim /var/opt/gitlab/nginx/conf/gitlab-http.conf\nlisten *:8899;\n")])])]),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("å¯ä»¥ä¸ç”¨\ncd /usr/local/nginx/conf\n# gitlab socket æ–‡ä»¶åœ°å€\n\nupstream gitlab {\nÂ  # 7.x ç‰ˆæœ¬åœ¨æ­¤ä½ç½®\nÂ  # server unix:/var/opt/gitlab/gitlab-rails/tmp/sockets/gitlab.socket;\nÂ  # 8.0 ä½ç½®\nÂ  server unix://var/opt/gitlab/gitlab-rails/sockets/gitlab.socket;\n}\n\nserver {\nÂ  listenÂ  Â  8899;Â  #ä¿®æ”¹ç«¯å£å·ï¼ˆnginxéœ€è¦è®¿é—®çš„ç«¯å£å·å’Œgitlab.rbä¸­ external_urlÂ ç«¯å£å·ä¿æŒä¸€è‡´Â  ï¼‰\nÂ  server_name localhost;Â Â \nÂ  server_tokens off;Â  Â  # don't show the version number, a security best practice\nÂ  root /opt/gitlab/embedded/service/gitlab-rails/public;\nÂ  client_max_body_size 250m;\nÂ  #access_logÂ  /var/log/gitlab/nginx/gitlab_access.log;\nÂ  #error_logÂ  /var/log/gitlab/nginx/gitlab_error.log;\nÂ  location / {\nÂ  Â  try_files $uri $uri/index.html $uri.html @gitlab;\nÂ  }\nÂ  location @gitlab {\nÂ  Â  proxy_read_timeout 300; # Some requests take more than 30 seconds.\nÂ  Â  proxy_connect_timeout 300; # Some requests take more than 30 seconds.\nÂ  Â  proxy_redirectÂ  Â  off;\nÂ  Â  proxy_set_headerÂ  X-Forwarded-Proto $scheme;\nÂ  Â  proxy_set_headerÂ  HostÂ  Â  Â  Â  Â  Â  Â  $http_host;\nÂ  Â  proxy_set_headerÂ  X-Real-IPÂ  Â  Â  Â  $remote_addr;\nÂ  Â  proxy_set_headerÂ  X-Forwarded-ForÂ  $proxy_add_x_forwarded_for;\nÂ  Â  proxy_set_headerÂ  X-Frame-OptionsÂ  SAMEORIGIN;\nÂ  Â  proxy_passÂ  Â http://127.0.0.1:8877; #å’Œgitlab.rbä¸­unicorn['port']Â  ç«¯å£å·ä¿æŒä¸€è‡´\nÂ  }\nÂ  location ~ ^/(assets)/Â  {\nÂ  Â  root /opt/gitlab/embedded/service/gitlab-rails/public;\nÂ  Â  expires max;\nÂ  Â  add_header Cache-Control public;\nÂ  }\nÂ  error_page 502 /502.html;\n}\n")])])]),a("ul",[a("li",[t._v("ç½‘ç»œé—®é¢˜ï¼Œå›½å†…ç”¨æˆ·ï¼Œå»ºè®®ä½¿ç”¨æ¸…åå¤§å­¦çš„é•œåƒæºè¿›è¡Œå®‰è£…")])]),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("vim /etc/yum.repos.d/gitlab-ce.repo\n")])])]),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("[gitlab-ce]\nname=gitlab-ce\nbaseurl=http://mirrors.tuna.tsinghua.edu.cn/gitlab-ce/yum/el7\nrepo_gpgcheck=0\ngpgcheck=0\nenabled=1\ngpgkey=https://packages.gitlab.com/gpg.key\n")])])]),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("yum makecache\nyum install gitlab-ce\n")])])]),a("ul",[a("li",[t._v("å‘½ä»¤ï¼ˆgitlab-ctl reconfigure è¿è¡ŒæŠ¥é”™åŠ  sudoï¼‰")])]),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("yum list | grep gitlab-ce\n\n/etc/gitlab/gitlab.rb          #gitlabé…ç½®æ–‡ä»¶\n/opt/gitlab                    #gitlabçš„ç¨‹åºå®‰è£…ç›®å½•\n/var/opt/gitlab                #gitlabç›®å½•æ•°æ®ç›®å½•\n/var/opt/gitlab/git-data       #å­˜æ”¾ä»“åº“æ•°æ®\ngitlab-ctl reconfigure         #é‡æ–°åŠ è½½é…ç½®\ngitlab-ctl status              #æŸ¥çœ‹å½“å‰gitlabæ‰€æœ‰æœåŠ¡è¿è¡ŒçŠ¶æ€\ngitlab-ctl stop                #åœæ­¢gitlabæœåŠ¡\ngitlab-ctl stop nginx          #å•ç‹¬åœæ­¢æŸä¸ªæœåŠ¡\ngitlab-ctl tail                #æŸ¥çœ‹æ‰€æœ‰æœåŠ¡çš„æ—¥å¿—\n\nGitlabçš„æœåŠ¡æ„æˆï¼š\nnginxï¼š                 é™æ€webæœåŠ¡å™¨\ngitlab-workhorse        è½»é‡çº§åå‘ä»£ç†æœåŠ¡å™¨\nlogrotate              æ—¥å¿—æ–‡ä»¶ç®¡ç†å·¥å…·\npostgresql             æ•°æ®åº“\nredis                  ç¼“å­˜æ•°æ®åº“\nsidekiq                ç”¨äºåœ¨åå°æ‰§è¡Œé˜Ÿåˆ—ä»»åŠ¡ï¼ˆå¼‚æ­¥æ‰§è¡Œï¼‰   \n")])])]),a("ul",[a("li",[t._v("Gitlab æ±‰åŒ–è¡¥ä¸( æ–°ç‰ˆæœ¬è‡ªå¸¦æœ¬åœ°åŒ– )")])]),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("cat /opt/gitlab/embedded/service/gitlab-rails/VERSION  ==>> 12.1.12     #æŸ¥çœ‹å®‰è£…ç‰ˆæœ¬ï¼Œä¿è¯å®‰è£…ä¸æ±‰åŒ–åŒ…ç‰ˆæœ¬ä¸€è‡´\n\ngit clone https://gitlab.com/xhang/gitlab.git\n# å…‹éš† GitLab.com ä»“åº“\ngit clone https://gitlab.com/larryli/gitlab.git\nï¼ƒæˆ– Gitcafe.com é•œåƒï¼Œé€Ÿåº¦æ›´å¿«\ngit clone https://gitcafe.com/larryli/gitlab.git\n\ncd gitlab\ngit branch -a\ngit diff remotes/origin/12-1-stable remotes/origin/12-1-stable-zh > /tmp/12.1.12-zh.diff\ngitlab-ctl stop\n\npatch -d /opt/gitlab/embedded/service/gitlab-rails -p1 < /tmp/10.0.0-zh.diff\næˆ–è€… \n# åº”ç”¨æ±‰åŒ–è¡¥ä¸\ncd /opt/gitlab/embedded/service/gitlab-rails\ngit apply /tmp/12.12-zh.diff \n\n\ngitlab-ctl start\ngitlab-ctl reconfigure\n")])])]),a("h2",{attrs:{id:"jenkins"}},[t._v("Jenkins")]),a("h4",{attrs:{id:"é…ç½®ä¿®æ”¹å»ºè®®é‡å¯jenkinsï¼ˆservice-jenkins-restartï¼‰ï¼Œæ„Ÿè§‰ç¼“å­˜ä¸¥é‡"}},[t._v("é…ç½®ä¿®æ”¹å»ºè®®é‡å¯Jenkinsï¼ˆservice jenkins restartï¼‰ï¼Œæ„Ÿè§‰ç¼“å­˜ä¸¥é‡")]),a("h3",{attrs:{id:"å®‰è£…"}},[t._v("å®‰è£…")]),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("yum install java\njava -version\nsudo wget -O /etc/yum.repos.d/jenkins.repo https://pkg.jenkins.io/redhat/jenkins.repo\nsudo rpm --import https://pkg.jenkins.io/redhat/jenkins.io.key\n")])])]),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("rpm -ql jenkins                            æŸ¥çœ‹å®‰è£…ç›®å½•\ncat /etc/sysconfig/jenkins | more          æŸ¥çœ‹Jenkinsç«¯å£ï¼ˆé»˜è®¤8080ï¼Œé…Œæƒ…ä¿®æ”¹ï¼‰\nservice start jenkins                      å¯åŠ¨Jenkins\n")])])]),a("h3",{attrs:{id:"ç³»ç»Ÿæ’ä»¶é…ç½®"}},[t._v("ç³»ç»Ÿæ’ä»¶é…ç½®")]),a("h5",{attrs:{id:"git-åœ°å€é…ç½®"}},[t._v("Git - åœ°å€é…ç½®")]),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("é¦–å…ˆæœåŠ¡å™¨æŸ¥çœ‹ git \nwhereis git    --\x3e> git: /usr/local/git /usr/local/git/bin/git /usr/local/git/libexec/git-core/git\né€‰æ‹©å¸¦æœ‰ â€œ/bin/gitâ€ çš„è·¯å¾„  => /usr/local/git/bin/git\nå¦‚æœæ²¡æœ‰ â€œ/bin/gitâ€ åˆ™æ·»åŠ   => /usr/local/git => /usr/local/git/bin/git\n\nç³»ç»Ÿè®¾ç½® - å…¨å±€å·¥å…·é…ç½® - Git\nPath to Git executable : /usr/local/git/bin/git\n")])])]),a("h5",{attrs:{id:"git-parameter-å‚æ•°æ„å»ºåŒ–"}},[t._v("Git Parameter - å‚æ•°æ„å»ºåŒ–")]),a("ul",[a("li",[t._v("å¸¸è§„å‚æ•°é…ç½®")])]),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("å¸¸è§„å‚æ•°é…ç½® - å‚æ•°åŒ–æ„å»ºè¿‡ç¨‹\n\nGitå‚æ•°\nåç§°  masterBranch ( è¿™ä¸ªåç§°éœ€è¦åœ¨æºç ç®¡ç†Gitå¤„ä½¿ç”¨ $masterBranch )\n\nğŸŒ°\nname ï¼š masterBranch\ndes  ï¼š åˆ†æ”¯\nå‚æ•°ç±»å‹ ï¼š åˆ†æ”¯\né»˜è®¤å€¼ ï¼š origin/master\n\næºç ç®¡ç† - Git - Branches to build\næŒ‡å®šåˆ†æ”¯ ï¼š$masterBranch\n")])])]),a("h5",{attrs:{id:"publish-over-ssh-æœåŠ¡å™¨è‡ªåŠ¨åŒ–"}},[t._v("Publish over SSH - æœåŠ¡å™¨è‡ªåŠ¨åŒ–")]),a("ul",[a("li",[t._v("åŸºç¡€ - é…ç½®é¡¹")])]),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("ç³»ç»Ÿç®¡ç† - ç³»ç»Ÿé…ç½® - Publish over SSH\n\nPassphraseï¼šå¯†ç ï¼ˆkeyçš„å¯†ç ï¼Œæ²¡è®¾ç½®å°±æ˜¯ç©ºï¼‰\nPath to keyï¼škeyæ–‡ä»¶ï¼ˆç§é’¥ï¼‰çš„è·¯å¾„\nKeyï¼šå°†ç§é’¥å¤åˆ¶åˆ°è¿™ä¸ªæ¡†ä¸­(path to keyå’Œkeyå†™ä¸€ä¸ªå³å¯)\n\nSSH Serversçš„é…ç½®ï¼š\nSSH Server Nameï¼šæ ‡è¯†çš„åå­—\nHostnameï¼šéœ€è¦è¿æ¥sshçš„ä¸»æœºåæˆ–ipåœ°å€ï¼ˆå»ºè®®ipï¼‰\nUsernameï¼šç”¨æˆ·å\nRemote Directoryï¼šè¿œç¨‹ç›®å½•ï¼ˆç”¨äºæ¥æ”¶Jenkinsä¼ è¿‡æ¥çš„ä»£ç ï¼‰\n\nğŸŒ°ï¼š\nName                   aliyun\nHostname               47.94.86.110\nUsername               root\nRemote Directory       /\n\né…ç½®æµ‹è¯•\nTest Configuration  ==>> Success\n")])])]),a("ul",[a("li",[t._v("æ„å»ºåæ“ä½œ - é…ç½®é¡¹")])]),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("æ„å»ºåæ“ä½œ - é…ç½®é¡¹ - Send build artifacts over SSH\n\nName:é€‰æ‹©ä¸€ä¸ªä½ é…å¥½çš„sshæœåŠ¡å™¨\nSource files ï¼šå†™ä½ è¦ä¼ è¾“çš„æ–‡ä»¶è·¯å¾„\nRemove prefix ï¼šè¦å»æ‰çš„å‰ç¼€ï¼Œä¸å†™è¿œç¨‹æœåŠ¡å™¨çš„ç›®å½•ç»“æ„å°†å’ŒSource fileså†™çš„ä¸€è‡´\nRemote directory ï¼šå†™ä½ è¦éƒ¨ç½²åœ¨è¿œç¨‹æœåŠ¡å™¨çš„é‚£ä¸ªç›®å½•åœ°å€ä¸‹ï¼Œä¸å†™å°±æ˜¯SSH Serversé…ç½®é‡Œé»˜è®¤è¿œç¨‹ç›®å½•\nExec command ï¼šä¼ è¾“å®Œäº†è¦æ‰§è¡Œçš„å‘½ä»¤ï¼Œæˆ‘è¿™é‡Œæ‰§è¡Œäº†è§£å‹ç¼©å’Œè§£å‹ç¼©å®Œæˆååˆ é™¤å‹ç¼©åŒ…2ä¸ªå‘½ä»¤\n\nğŸŒ°ï¼š\nSSH Publishers\n  SSH Scrver\n  \tName ï¼š aliyun\n  Transfer Set\n  \tSource files ï¼š build/build.tar.gz\n  \tRemove prefix ï¼š build/\n  \tRemote directory ï¼š /Alex/react-cli/\n\t\tExec command ï¼š  cd /Alex/react-cli\n                     tar -zxvf build.tar.gz\n                     rm -rf build.tar.gz\n")])])]),a("h5",{attrs:{id:"nodejs-node-ç‰ˆæœ¬åˆ‡æ¢ï¼ˆè§£å†³yarn-npm-æ‰¾ä¸åˆ°çš„é—®é¢˜ï¼‰"}},[t._v("Nodejs - node ç‰ˆæœ¬åˆ‡æ¢ï¼ˆè§£å†³yarn/npm æ‰¾ä¸åˆ°çš„é—®é¢˜ï¼‰")]),a("ul",[a("li",[t._v("åŸºç¡€ - é…ç½®é¡¹")])]),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("å®‰è£…\nç³»ç»Ÿç®¡ç† - æ’ä»¶ç®¡ç† - NodeJs\n\né…ç½®\nç³»ç»Ÿè®¾ç½® - å…¨å±€å·¥å…·é…ç½® - NodeJS  é€‰æ‹©ç‰ˆæœ¬é…ç½®å³å¯\n")])])]),a("ul",[a("li",[t._v("æ„å»ºç¯å¢ƒ - é…ç½®é¡¹")])]),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("é€‰ä¸­ Provide Node & npm bin/ folder to PATH\né€‰æ‹© éœ€è¦è¿è¡Œçš„Nodeç¯å¢ƒ\n")])])]),a("h3",{attrs:{id:"æ³¨æ„äº‹é¡¹-2"}},[t._v("æ³¨æ„äº‹é¡¹")]),a("ul",[a("li",[t._v("git  ls-remote -h ...  ä»€ä¹ˆçš„æŠ¥é”™ï¼ˆåŸå›  Jenkins git ç‰ˆæœ¬å¤ªä½ï¼‰")])]),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('å¸è½½æœåŠ¡å™¨  git\nyum remove -y git\n\né‡æ–°æºç å®‰è£… git\nyum -y install libcurl-devel expat-devel curl-devel  gettext-devel openssl-devel zlib-devel\nyum -y install  gcc perl-ExtUtils-MakeMaker\ncd /\nwget https://mirrors.edge.kernel.org/pub/software/scm/git/git-2.1.1.tar.gz\ntar -zvxf git-2.1.1.tar.gz\ncd git-2.1.1\nmake prefix=/usr/local/git all\nmake prefix=/usr/local/git install\n\næ·»åŠ ç¯å¢ƒå˜é‡\necho "export PATH=$PATH:/usr/local/git/bin" >> /etc/bashrc\nsource /etc/bashrc\n\næŸ¥çœ‹æœ€æ–° git ä¿¡æ¯\ngit --version  --\x3e> git version 2.1.1\nwhereis git    --\x3e> git: /usr/local/git /usr/local/git/bin/git /usr/local/git/libexec/git-core/git\n')])])]),a("h2",{attrs:{id:"gitlab-jenkins-è‡ªåŠ¨åŒ–éƒ¨ç½²"}},[t._v("gitlab + jenkins è‡ªåŠ¨åŒ–éƒ¨ç½²")]),a("ul",[a("li",[a("p",[t._v("æ–°å»ºJenknsé¡¹ç›®")])]),a("li",[a("p",[t._v("å¸¸è§„å‚æ•°é…ç½®")])]),a("li",[a("p",[t._v("æºç ç®¡ç†é…ç½®")]),a("ul",[a("li",[t._v("git  - é…ç½®ä»“åº“åœ°å€ ï¼Œ æ·»åŠ å¸å·å‡­è¯åŠæƒé™ï¼ˆpassworld æˆ–è€… sshï¼‰")])])]),a("li",[a("p",[t._v("æ„å»ºè§¦å‘å™¨")]),a("ul",[a("li",[t._v("Build when a change is pushed to GitLab.  URL: http://47.11.11.11./project/react-cli")])]),a("p",[t._v("è·å–å½“å‰é¡¹ç›®åœ°å€   http://47.11.11.11./project/react-cli")]),a("p",[t._v("ç”Ÿæˆ Secret token(å®‰å…¨ä»¤ç‰Œ)  12425b353j6lk3j6lk47l47l")]),a("ul",[a("li",[t._v("geilab é¡¹ç›®é‡Œé¢é…ç½®")])]),a("p",[t._v("è®¾ç½® - é›†æˆ  ==>> å°†jenkinsé‡Œè·å–çš„    url + Secret token  åˆ†åˆ«é…ç½®åœ¨gitlabä¸­çš„ url Secret Tokenï¼ŒåŠå®Œæˆäº†gitlab Webhooks é…ç½®")])]),a("li",[a("p",[t._v("æ„å»ºç¯å¢ƒ")]),a("p",[t._v("é…ç½®node    "),a("code",[t._v("Provide Node & npm bin/ folder to PATH")])])]),a("li",[a("p",[t._v("æ„å»º")])])]),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("#!/bin/bash\nyarn\nyarn build\ntar -zcvf build.tar.gz *\n")])])])])}],!1,null,null,null);e.default=s.exports}}]);